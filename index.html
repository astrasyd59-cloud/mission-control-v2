<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="cache-control" content="no-cache, no-store, must-revalidate">
    <meta name="pragma" content="no-cache">
    <meta name="expires" content="0">
    <meta name="version" content="6.4.0">
    <title>Mission Control | Dibs</title>
    <script>
        // Cache-busting: force fresh load
        window.MC_VERSION = '6.4.0-' + Date.now();
        console.log('[Mission Control] Version:', window.MC_VERSION);
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0a0c;
            --bg-secondary: #0f0f12;
            --bg-tertiary: #141418;
            --bg-glass: rgba(20, 20, 24, 0.9);
            --accent-gold: #fbbf24;
            --accent-amber: #f59e0b;
            --accent-bronze: #d97706;
            --accent-gold-glow: rgba(251, 191, 36, 0.3);
            --text-primary: #fafaf9;
            --text-secondary: #e7e5e4;
            --text-muted: #a8a29e;
            --success: #22c55e;
            --success-glow: rgba(34, 197, 94, 0.2);
            --warning: #f59e0b;
            --danger: #ef4444;
            --danger-glow: rgba(239, 68, 68, 0.2);
            --info: #3b82f6;
            --priority-critical: #ef4444;
            --priority-critical-glow: rgba(239, 68, 68, 0.3);
            --priority-medium: #f59e0b;
            --priority-medium-glow: rgba(245, 158, 11, 0.3);
            --priority-low: #22c55e;
            --priority-low-glow: rgba(34, 197, 94, 0.3);
            --spacing-xs: 0.5rem; --spacing-sm: 0.75rem; --spacing-md: 1rem; --spacing-lg: 1.5rem; --spacing-xl: 2rem; --spacing-2xl: 3rem;
            --radius-sm: 6px; --radius-md: 12px; --radius-lg: 16px; --radius-xl: 24px;
            --transition-fast: all 0.2s ease; --transition-base: all 0.3s ease; --transition-slow: all 0.5s ease;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
            background-image: radial-gradient(ellipse at top, rgba(251, 191, 36, 0.03) 0%, transparent 50%), radial-gradient(ellipse at bottom right, rgba(245, 158, 11, 0.02) 0%, transparent 40%);
        }

        /* HEADER */
        .header {
            position: sticky; top: 0; z-index: 100;
            background: linear-gradient(180deg, rgba(10, 10, 12, 0.98) 0%, rgba(15, 15, 18, 0.95) 100%);
            backdrop-filter: blur(24px);
            border-bottom: 1px solid rgba(251, 191, 36, 0.1);
            padding: var(--spacing-md) var(--spacing-xl);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.4);
        }
        .header-content { max-width: 1600px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; gap: var(--spacing-lg); }
        .logo { display: flex; align-items: center; gap: var(--spacing-sm); }
        .logo-icon {
            width: 42px; height: 42px;
            background: linear-gradient(135deg, var(--accent-gold) 0%, var(--accent-amber) 50%, var(--accent-bronze) 100%);
            border-radius: var(--radius-md);
            display: flex; align-items: center; justify-content: center;
            font-size: 1.25rem;
            box-shadow: 0 0 20px var(--accent-gold-glow);
            position: relative; overflow: hidden;
        }
        .logo-icon::after {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.3) 50%, transparent 70%);
            animation: shimmer 3s infinite;
        }
        @keyframes shimmer { 0% { transform: translateX(-100%) translateY(-100%); } 100% { transform: translateX(100%) translateY(100%); } }
        .logo-text { font-size: 1.35rem; font-weight: 800; letter-spacing: -0.02em; background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-gold) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .logo-subtext { font-size: 0.6875rem; color: var(--accent-amber); text-transform: uppercase; letter-spacing: 0.15em; font-weight: 600; }
        
        .nav-tabs { display: flex; gap: var(--spacing-xs); background: rgba(20, 20, 24, 0.6); padding: 4px; border-radius: var(--radius-lg); border: 1px solid rgba(251, 191, 36, 0.08); }
        .nav-tab { padding: var(--spacing-sm) var(--spacing-md); border-radius: var(--radius-md); cursor: pointer; transition: var(--transition-base); font-size: 0.8125rem; font-weight: 500; color: var(--text-muted); border: none; background: transparent; }
        .nav-tab:hover { color: var(--text-primary); background: rgba(251, 191, 36, 0.05); }
        .nav-tab.active { background: linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(245, 158, 11, 0.1) 100%); color: var(--accent-gold); box-shadow: 0 0 20px var(--accent-gold-glow), inset 0 1px 0 rgba(251, 191, 36, 0.2); border: 1px solid rgba(251, 191, 36, 0.2); }
        
        .main-content { max-width: 1600px; margin: 0 auto; padding: var(--spacing-xl); }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeInUp 0.5s ease-out; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* HERO - ANIME VIBES */
        .hero-section {
            position: relative;
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
            border-radius: var(--radius-xl);
            padding: var(--spacing-2xl);
            margin-bottom: var(--spacing-xl);
            overflow: hidden;
            border: 1px solid rgba(251, 191, 36, 0.1);
            min-height: 280px;
            display: flex;
            align-items: center;
        }
        .hero-section::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px;
            background: linear-gradient(90deg, transparent 0%, var(--accent-gold) 50%, transparent 100%);
        }
        .hero-bg {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background-image: url('https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?w=1920&q=80');
            background-size: cover;
            background-position: center;
            opacity: 0.3;
            filter: saturate(1.3) contrast(1.1);
        }
        .hero-overlay {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(135deg, rgba(10, 10, 12, 0.85) 0%, rgba(15, 15, 18, 0.7) 50%, rgba(10, 10, 12, 0.9) 100%);
        }
        .hero-content { position: relative; z-index: 1; display: flex; justify-content: space-between; align-items: center; width: 100%; }
        .hero-greeting { font-size: 2.5rem; font-weight: 800; letter-spacing: -0.02em; margin-bottom: var(--spacing-sm); background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-gold) 50%, var(--accent-amber) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .hero-subtitle { font-size: 1.125rem; color: var(--text-secondary); margin-bottom: var(--spacing-md); }
        .hero-status { display: flex; gap: var(--spacing-lg); margin-top: var(--spacing-lg); }
        .status-pill { display: flex; align-items: center; gap: var(--spacing-xs); background: rgba(251, 191, 36, 0.1); border: 1px solid rgba(251, 191, 36, 0.2); padding: var(--spacing-xs) var(--spacing-md); border-radius: 100px; font-size: 0.875rem; color: var(--accent-gold); }
        .status-dot { width: 8px; height: 8px; background: var(--accent-gold); border-radius: 50%; animation: pulse 2s infinite; box-shadow: 0 0 10px var(--accent-gold-glow); }
        @keyframes pulse { 0%, 100% { opacity: 1; transform: scale(1); } 50% { opacity: 0.6; transform: scale(0.9); } }
        .hero-datetime { text-align: right; }
        .hero-time { font-size: 3rem; font-weight: 200; color: var(--accent-gold); font-variant-numeric: tabular-nums; letter-spacing: -0.05em; text-shadow: 0 0 30px var(--accent-gold-glow); }
        .hero-date { font-size: 0.9375rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.1em; }

        /* SECTIONS */
        .section { background: linear-gradient(135deg, rgba(20, 20, 24, 0.9) 0%, rgba(15, 15, 18, 0.95) 100%); border: 1px solid rgba(251, 191, 36, 0.08); border-radius: var(--radius-lg); padding: var(--spacing-xl); margin-bottom: var(--spacing-xl); position: relative; overflow: hidden; }
        .section::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px; background: linear-gradient(90deg, transparent 0%, rgba(251, 191, 36, 0.3) 50%, transparent 100%); }
        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-lg); padding-bottom: var(--spacing-md); border-bottom: 1px solid rgba(251, 191, 36, 0.1); }
        .section-title { font-size: 1.25rem; font-weight: 700; display: flex; align-items: center; gap: var(--spacing-sm); color: var(--text-primary); }
        .section-title-icon { width: 36px; height: 36px; background: linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(245, 158, 11, 0.1) 100%); border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; border: 1px solid rgba(251, 191, 36, 0.2); }

        /* BUTTONS */
        .btn { background: linear-gradient(135deg, var(--accent-gold) 0%, var(--accent-amber) 100%); color: var(--bg-primary); border: none; border-radius: var(--radius-md); padding: var(--spacing-sm) var(--spacing-lg); font-size: 0.875rem; font-weight: 600; cursor: pointer; transition: var(--transition-base); box-shadow: 0 4px 20px var(--accent-gold-glow); }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 8px 30px var(--accent-gold-glow); }
        .btn-secondary { background: transparent; color: var(--accent-gold); border: 1px solid rgba(251, 191, 36, 0.3); box-shadow: none; }
        .btn-secondary:hover { background: rgba(251, 191, 36, 0.1); box-shadow: 0 4px 20px var(--accent-gold-glow); }

        /* NEWS ITEMS - CLICKABLE */
        .news-item { display: flex; gap: var(--spacing-md); padding: var(--spacing-md); background: linear-gradient(135deg, rgba(251, 191, 36, 0.03) 0%, rgba(245, 158, 11, 0.02) 100%); border-radius: var(--radius-md); border-left: 3px solid var(--accent-gold); margin-bottom: var(--spacing-sm); transition: var(--transition-base); border: 1px solid rgba(251, 191, 36, 0.05); border-left-width: 3px; cursor: pointer; }
        .news-item:hover { background: linear-gradient(135deg, rgba(251, 191, 36, 0.08) 0%, rgba(245, 158, 11, 0.06) 100%); transform: translateX(6px); box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3), 0 0 20px var(--accent-gold-glow); }
        .news-number { font-weight: 800; color: var(--accent-gold); font-size: 1.125rem; min-width: 28px; text-align: center; text-shadow: 0 0 10px var(--accent-gold-glow); }
        .news-content { flex: 1; }
        .news-title { font-weight: 600; font-size: 1rem; color: var(--text-primary); margin-bottom: 4px; }
        .news-summary { font-size: 0.875rem; color: var(--text-muted); margin-bottom: 6px; }
        .news-meta { display: flex; justify-content: space-between; align-items: center; }
        .news-source { font-size: 0.75rem; color: var(--text-muted); }
        .news-category { font-size: 0.6875rem; color: var(--accent-gold); background: rgba(251, 191, 36, 0.1); padding: 3px 10px; border-radius: 100px; text-transform: uppercase; letter-spacing: 0.05em; font-weight: 600; }

        /* MODAL */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(8px); z-index: 1000; justify-content: center; align-items: center; padding: var(--spacing-xl); }
        .modal-overlay.active { display: flex; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .modal { background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border: 1px solid rgba(251, 191, 36, 0.2); border-radius: var(--radius-xl); max-width: 600px; width: 100%; max-height: 80vh; overflow-y: auto; position: relative; box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5), 0 0 40px var(--accent-gold-glow); }
        .modal-header { padding: var(--spacing-xl); border-bottom: 1px solid rgba(251, 191, 36, 0.1); display: flex; justify-content: space-between; align-items: flex-start; }
        .modal-title { font-size: 1.5rem; font-weight: 700; color: var(--text-primary); margin-bottom: var(--spacing-xs); }
        .modal-source { font-size: 0.875rem; color: var(--accent-gold); }
        .modal-close { background: none; border: none; color: var(--text-muted); font-size: 1.5rem; cursor: pointer; padding: var(--spacing-xs); transition: var(--transition-fast); }
        .modal-close:hover { color: var(--accent-gold); }
        .modal-body { padding: var(--spacing-xl); }
        .modal-summary { font-size: 1rem; line-height: 1.7; color: var(--text-secondary); margin-bottom: var(--spacing-lg); }
        .modal-actions { display: flex; gap: var(--spacing-md); }
        .modal-btn { flex: 1; padding: var(--spacing-md); border-radius: var(--radius-md); font-weight: 600; cursor: pointer; transition: var(--transition-base); text-align: center; text-decoration: none; display: inline-flex; align-items: center; justify-content: center; gap: var(--spacing-xs); }
        .modal-btn-primary { background: linear-gradient(135deg, var(--accent-gold) 0%, var(--accent-amber) 100%); color: var(--bg-primary); border: none; }
        .modal-btn-secondary { background: transparent; color: var(--accent-gold); border: 1px solid rgba(251, 191, 36, 0.3); }

        /* CRYPTO WATCHLIST */
        .watchlist-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: var(--spacing-md); }
        .crypto-card { background: linear-gradient(135deg, rgba(20, 20, 24, 0.95) 0%, rgba(15, 15, 18, 0.98) 100%); border: 1px solid rgba(251, 191, 36, 0.1); border-radius: var(--radius-lg); padding: var(--spacing-lg); text-align: center; transition: var(--transition-base); position: relative; overflow: hidden; }
        .crypto-card:hover { transform: translateY(-4px); border-color: rgba(251, 191, 36, 0.2); box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4), 0 0 20px var(--accent-gold-glow); }
        .crypto-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, transparent 0%, var(--accent-gold) 50%, transparent 100%); }
        .crypto-icon { width: 48px; height: 48px; margin: 0 auto var(--spacing-sm); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; background: linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(245, 158, 11, 0.1) 100%); border: 1px solid rgba(251, 191, 36, 0.2); }
        .crypto-name { font-weight: 700; font-size: 1.125rem; margin-bottom: 2px; }
        .crypto-symbol { font-size: 0.75rem; color: var(--text-muted); text-transform: uppercase; margin-bottom: var(--spacing-sm); }
        .crypto-price { font-size: 1.5rem; font-weight: 800; background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-gold) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 4px; }
        .crypto-change { font-size: 0.875rem; font-weight: 600; padding: 2px 8px; border-radius: 4px; display: inline-block; }
        .crypto-change.up { color: var(--success); background: var(--success-glow); }
        .crypto-change.down { color: var(--danger); background: var(--danger-glow); }
        .crypto-sparkline { height: 40px; margin-top: var(--spacing-sm); opacity: 0.6; }

        /* QUOTE BOX */
        .quote-box { margin-top: var(--spacing-lg); padding: var(--spacing-lg); background: linear-gradient(135deg, rgba(251, 191, 36, 0.08) 0%, rgba(245, 158, 11, 0.05) 100%); border-left: 4px solid var(--accent-gold); border-radius: var(--radius-md); font-style: italic; color: var(--text-secondary); font-size: 1.125rem; line-height: 1.6; position: relative; }
        .quote-box::before { content: '"'; font-size: 4rem; color: var(--accent-gold); opacity: 0.3; position: absolute; top: -10px; left: 10px; font-family: Georgia, serif; }
        .quote-author { margin-top: var(--spacing-sm); font-size: 0.875rem; color: var(--accent-gold); font-style: normal; font-weight: 600; }

        /* METRIC CARDS */
        .cards-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: var(--spacing-lg); margin-bottom: var(--spacing-xl); }
        .metric-card { background: linear-gradient(135deg, rgba(20, 20, 24, 0.95) 0%, rgba(15, 15, 18, 0.98) 100%); border: 1px solid rgba(251, 191, 36, 0.1); border-radius: var(--radius-lg); padding: var(--spacing-xl); position: relative; overflow: hidden; transition: var(--transition-base); }
        .metric-card:hover { transform: translateY(-4px); border-color: rgba(251, 191, 36, 0.2); box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4), 0 0 30px var(--accent-gold-glow); }
        .metric-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, transparent 0%, var(--accent-gold) 50%, transparent 100%); }
        .metric-icon { width: 48px; height: 48px; border-radius: var(--radius-md); display: flex; align-items: center; justify-content: center; font-size: 1.5rem; margin-bottom: var(--spacing-md); background: linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(245, 158, 11, 0.1) 100%); border: 1px solid rgba(251, 191, 36, 0.2); box-shadow: 0 0 20px var(--accent-gold-glow); }
        .metric-label { font-size: 0.6875rem; text-transform: uppercase; letter-spacing: 0.15em; color: var(--text-muted); margin-bottom: var(--spacing-xs); font-weight: 600; }
        .metric-value { font-size: 2.25rem; font-weight: 800; margin-bottom: var(--spacing-xs); background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-gold) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .metric-trend { font-size: 0.8125rem; display: flex; align-items: center; gap: 4px; }
        .trend-up { color: var(--success); }

        /* CALENDAR WIDGET */
        .calendar-section { background: linear-gradient(135deg, rgba(251, 191, 36, 0.05) 0%, rgba(20, 20, 24, 0.8) 100%); border: 1px solid rgba(251, 191, 36, 0.15); border-radius: var(--radius-lg); padding: var(--spacing-lg); margin-bottom: var(--spacing-xl); }
        .calendar-header-main { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-md); }
        .calendar-title { font-size: 1.125rem; font-weight: 600; color: var(--accent-gold); }
        .calendar-nav { display: flex; gap: var(--spacing-sm); }
        .calendar-nav-btn { background: rgba(251, 191, 36, 0.1); border: 1px solid rgba(251, 191, 36, 0.2); color: var(--accent-gold); padding: var(--spacing-xs) var(--spacing-sm); border-radius: var(--radius-sm); cursor: pointer; font-size: 0.875rem; }
        .calendar-nav-btn:hover { background: rgba(251, 191, 36, 0.2); }
        .calendar-grid-main { display: grid; grid-template-columns: repeat(7, 1fr); gap: 6px; }
        .calendar-day-header { font-size: 0.75rem; color: var(--text-muted); text-align: center; padding: var(--spacing-xs); font-weight: 500; }
        .calendar-day-cell { 
            aspect-ratio: 1; 
            background: rgba(20, 20, 24, 0.6); 
            border: 1px solid rgba(251, 191, 36, 0.05); 
            border-radius: var(--radius-sm); 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            cursor: pointer; 
            transition: var(--transition-fast);
            min-height: 60px;
        }
        .calendar-day-cell:hover { background: rgba(251, 191, 36, 0.1); border-color: rgba(251, 191, 36, 0.3); }
        .calendar-day-cell.today { background: linear-gradient(135deg, rgba(251, 191, 36, 0.3) 0%, rgba(245, 158, 11, 0.2) 100%); border-color: var(--accent-gold); }
        .calendar-day-cell.has-note { border-color: var(--accent-gold); }
        .calendar-day-number { font-size: 0.9375rem; font-weight: 600; color: var(--text-primary); }
        .calendar-day-cell.today .calendar-day-number { color: var(--accent-gold); }
        .calendar-note-indicator { font-size: 0.625rem; color: var(--accent-gold); margin-top: 2px; max-width: 90%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; text-align: center; }

        /* === ENHANCED TASK SYSTEM === */
        .tasks-container { background: rgba(20, 20, 24, 0.6); border: 1px solid rgba(251, 191, 36, 0.1); border-radius: var(--radius-md); overflow: hidden; }
        
        /* Task List */
        .task-list { padding: var(--spacing-sm); }
        .task-item { 
            display: flex; 
            align-items: center; 
            gap: var(--spacing-sm); 
            padding: var(--spacing-sm) var(--spacing-md); 
            border-bottom: 1px solid rgba(251, 191, 36, 0.05); 
            transition: var(--transition-fast);
            animation: slideIn 0.3s ease-out;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }
        .task-item:last-child { border-bottom: none; }
        .task-item:hover { background: rgba(251, 191, 36, 0.03); }
        .task-item.completed { opacity: 0.5; }
        .task-item.completed .task-text { text-decoration: line-through; color: var(--text-muted); }
        
        /* Priority Indicator */
        .task-priority {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            flex-shrink: 0;
            cursor: pointer;
            transition: var(--transition-fast);
        }
        .task-priority:hover { transform: scale(1.3); }
        .task-priority.critical { background: var(--priority-critical); box-shadow: 0 0 8px var(--priority-critical-glow); }
        .task-priority.medium { background: var(--priority-medium); box-shadow: 0 0 8px var(--priority-medium-glow); }
        .task-priority.low { background: var(--priority-low); box-shadow: 0 0 8px var(--priority-low-glow); }
        
        /* Priority Selector */
        .priority-selector {
            display: none;
            position: absolute;
            background: var(--bg-secondary);
            border: 1px solid rgba(251, 191, 36, 0.2);
            border-radius: var(--radius-sm);
            padding: var(--spacing-xs);
            gap: var(--spacing-xs);
            z-index: 10;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        }
        .priority-selector.active { display: flex; }
        .priority-option {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
            transition: var(--transition-fast);
            border: 2px solid transparent;
        }
        .priority-option:hover { transform: scale(1.2); }
        .priority-option.critical { background: var(--priority-critical); }
        .priority-option.medium { background: var(--priority-medium); }
        .priority-option.low { background: var(--priority-low); }
        .priority-option.selected { border-color: var(--text-primary); }
        
        /* Checkbox */
        .task-checkbox { 
            width: 20px; 
            height: 20px; 
            border: 2px solid rgba(251, 191, 36, 0.3); 
            border-radius: 4px; 
            cursor: pointer; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            flex-shrink: 0; 
            transition: var(--transition-fast); 
            font-size: 0.75rem;
            color: var(--bg-primary);
        }
        .task-checkbox:hover { border-color: var(--accent-gold); }
        .task-checkbox.checked { background: var(--accent-gold); border-color: var(--accent-gold); }
        
        /* Task Text */
        .task-text { 
            flex: 1; 
            font-size: 0.9375rem;
            background: transparent;
            border: none;
            color: var(--text-primary);
            outline: none;
            padding: 2px 0;
        }
        .task-text::placeholder { color: var(--text-muted); }
        
        /* Task Delete */
        .task-delete { 
            background: none; 
            border: none; 
            color: var(--text-muted); 
            cursor: pointer; 
            font-size: 1.25rem; 
            opacity: 0; 
            transition: var(--transition-fast); 
            padding: 0 var(--spacing-xs);
        }
        .task-item:hover .task-delete { opacity: 1; }
        .task-delete:hover { color: var(--danger); }
        
        /* Empty State */
        .task-empty { 
            text-align: center; 
            color: var(--text-muted); 
            padding: var(--spacing-lg);
            font-style: italic;
        }
        
        /* Show More Button */
        .show-more-btn {
            width: 100%;
            padding: var(--spacing-sm);
            background: rgba(251, 191, 36, 0.05);
            border: none;
            border-top: 1px solid rgba(251, 191, 36, 0.1);
            color: var(--accent-gold);
            cursor: pointer;
            font-size: 0.875rem;
            transition: var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-xs);
        }
        .show-more-btn:hover { background: rgba(251, 191, 36, 0.1); }
        .show-more-btn .count {
            background: rgba(251, 191, 36, 0.2);
            padding: 2px 8px;
            border-radius: 100px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        /* Add Task Area */
        .add-task-area {
            display: flex;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-md);
            background: rgba(251, 191, 36, 0.03);
            border-top: 1px solid rgba(251, 191, 36, 0.1);
        }
        .add-task-input {
            flex: 1;
            background: rgba(251, 191, 36, 0.05);
            border: 1px solid rgba(251, 191, 36, 0.2);
            border-radius: var(--radius-md);
            padding: var(--spacing-sm) var(--spacing-md);
            color: var(--text-primary);
            font-size: 0.9375rem;
            outline: none;
            transition: var(--transition-fast);
        }
        .add-task-input:focus {
            border-color: var(--accent-gold);
            background: rgba(251, 191, 36, 0.08);
        }
        .add-task-input::placeholder { color: var(--text-muted); }
        
        /* Priority Buttons for New Task */
        .priority-buttons {
            display: flex;
            gap: var(--spacing-xs);
        }
        .priority-btn {
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            border: 1px solid transparent;
            transition: var(--transition-fast);
            white-space: nowrap;
        }
        .priority-btn.critical {
            background: rgba(239, 68, 68, 0.1);
            color: var(--priority-critical);
            border-color: rgba(239, 68, 68, 0.3);
        }
        .priority-btn.critical:hover, .priority-btn.critical.active {
            background: var(--priority-critical);
            color: var(--bg-primary);
        }
        .priority-btn.medium {
            background: rgba(245, 158, 11, 0.1);
            color: var(--priority-medium);
            border-color: rgba(245, 158, 11, 0.3);
        }
        .priority-btn.medium:hover, .priority-btn.medium.active {
            background: var(--priority-medium);
            color: var(--bg-primary);
        }
        .priority-btn.low {
            background: rgba(34, 197, 94, 0.1);
            color: var(--priority-low);
            border-color: rgba(34, 197, 94, 0.3);
        }
        .priority-btn.low:hover, .priority-btn.low.active {
            background: var(--priority-low);
            color: var(--bg-primary);
        }
        
        .add-task-submit {
            background: linear-gradient(135deg, var(--accent-gold) 0%, var(--accent-amber) 100%);
            color: var(--bg-primary);
            border: none;
            border-radius: var(--radius-md);
            width: 36px;
            height: 36px;
            cursor: pointer;
            font-size: 1.25rem;
            transition: var(--transition-fast);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .add-task-submit:hover { transform: scale(1.05); box-shadow: 0 0 15px var(--accent-gold-glow); }

        /* COMPACT WATCHLIST */
        .watchlist-compact { background: rgba(20, 20, 24, 0.6); border: 1px solid rgba(251, 191, 36, 0.1); border-radius: var(--radius-md); overflow: hidden; }
        .watchlist-row { display: flex; align-items: center; gap: var(--spacing-md); padding: var(--spacing-sm) var(--spacing-md); border-bottom: 1px solid rgba(251, 191, 36, 0.05); transition: var(--transition-fast); }
        .watchlist-row:last-child { border-bottom: none; }
        .watchlist-row:hover { background: rgba(251, 191, 36, 0.03); }
        .watchlist-icon { width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; font-size: 1rem; background: linear-gradient(135deg, rgba(251, 191, 36, 0.1) 0%, rgba(245, 158, 11, 0.05) 100%); border-radius: var(--radius-sm); }
        .watchlist-name { flex: 1; font-weight: 500; font-size: 0.9375rem; }
        .watchlist-symbol { color: var(--text-muted); font-size: 0.8125rem; min-width: 50px; }
        .watchlist-price { font-family: 'Inter', monospace; font-weight: 600; font-size: 0.9375rem; min-width: 100px; text-align: right; }
        .watchlist-change { font-size: 0.8125rem; font-weight: 500; min-width: 60px; text-align: right; }
        .watchlist-change.up { color: var(--success); }
        .watchlist-change.down { color: var(--danger); }

        /* CALENDAR NOTES */
        .calendar-date { font-size: 0.75rem; color: var(--text-secondary); padding: 4px 2px; border-radius: var(--radius-sm); cursor: pointer; transition: var(--transition-fast); min-height: 44px; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; }
        .calendar-date:hover { background: rgba(251, 191, 36, 0.1); color: var(--accent-gold); }
        .calendar-date.today { background: linear-gradient(135deg, var(--accent-gold) 0%, var(--accent-amber) 100%); color: var(--bg-primary); font-weight: 700; }
        .calendar-date.has-note { border: 1px solid rgba(251, 191, 36, 0.3); }
        .calendar-day-number { font-weight: 500; margin-bottom: 2px; }
        .calendar-note-preview { font-size: 0.625rem; color: var(--accent-gold); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%; line-height: 1.2; }
        
        .date-modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(8px); z-index: 200; display: none; align-items: center; justify-content: center; }
        .date-modal-overlay.active { display: flex; }
        .date-modal { background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border: 1px solid rgba(251, 191, 36, 0.2); border-radius: var(--radius-lg); width: 90%; max-width: 400px; max-height: 80vh; overflow: hidden; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5); }
        .date-modal-header { padding: var(--spacing-md) var(--spacing-lg); border-bottom: 1px solid rgba(251, 191, 36, 0.1); display: flex; justify-content: space-between; align-items: center; }
        .date-modal-title { font-size: 1.125rem; font-weight: 600; color: var(--accent-gold); }
        .date-modal-close { background: none; border: none; color: var(--text-muted); font-size: 1.5rem; cursor: pointer; transition: var(--transition-fast); }
        .date-modal-close:hover { color: var(--accent-gold); }
        .date-modal-body { padding: var(--spacing-md); }
        .date-note-input { width: 100%; background: rgba(251, 191, 36, 0.05); border: 1px solid rgba(251, 191, 36, 0.2); border-radius: var(--radius-md); padding: var(--spacing-sm); color: var(--text-primary); font-family: inherit; margin-bottom: var(--spacing-sm); resize: vertical; min-height: 60px; }
        .date-note-item { display: flex; align-items: flex-start; gap: var(--spacing-sm); padding: var(--spacing-sm); background: rgba(251, 191, 36, 0.05); border-radius: var(--radius-sm); margin-bottom: var(--spacing-sm); }
        .date-note-text { flex: 1; font-size: 0.875rem; word-break: break-word; }
        .date-note-delete { background: none; border: none; color: var(--text-muted); cursor: pointer; font-size: 1rem; padding: 0; transition: var(--transition-fast); }
        .date-note-delete:hover { color: var(--danger); }
        .date-notes-list { max-height: 200px; overflow-y: auto; margin-bottom: var(--spacing-sm); }

        .loading { display: inline-block; width: 20px; height: 20px; border: 2px solid rgba(251, 191, 36, 0.2); border-top-color: var(--accent-gold); border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        @media (max-width: 1200px) { .cards-grid, .watchlist-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 768px) {
            .hero-content { flex-direction: column; align-items: flex-start; gap: var(--spacing-lg); }
            .hero-time { font-size: 2rem; } .hero-greeting { font-size: 1.75rem; }
            .cards-grid, .watchlist-grid { grid-template-columns: 1fr; }
            .nav-tabs { overflow-x: auto; flex-wrap: nowrap; }
            .add-task-area { flex-wrap: wrap; }
            .add-task-input { width: 100%; }
            .priority-buttons { width: 100%; justify-content: flex-start; }
        }
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-secondary); }
        ::-webkit-scrollbar-thumb { background: rgba(251, 191, 36, 0.2); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(251, 191, 36, 0.4); }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-icon">üó°Ô∏è</div>
                <div>
                    <div class="logo-text">Mission Control</div>
                    <div class="logo-subtext">OpenClaw Empire</div>
                </div>
            </div>
            <nav class="nav-tabs">
                <button class="nav-tab active" onclick="switchTab('dashboard')">üìä Dashboard</button>
                <button class="nav-tab" onclick="switchTab('projects')">üìã Projects</button>
                <button class="nav-tab" onclick="switchTab('revenue')">üí∞ Revenue</button>
                <button class="nav-tab" onclick="switchTab('ai-costs')">ü§ñ AI Costs</button>
                <button class="nav-tab" onclick="switchTab('notes')">üìù Notes</button>
            </nav>
        </div>
    </header>

    <!-- MODAL -->
    <div class="modal-overlay" id="newsModal" onclick="closeModal(event)">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <div>
                    <div class="modal-title" id="modalTitle">Article Title</div>
                    <div class="modal-source" id="modalSource">Source Name</div>
                </div>
                <button class="modal-close" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="modal-summary" id="modalSummary">Article summary goes here...</div>
                <div class="modal-actions">
                    <a id="modalLink" href="#" target="_blank" class="modal-btn modal-btn-primary">üöÄ Read Full Article</a>
                    <button class="modal-btn modal-btn-secondary" onclick="closeModal()">‚úï Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- DATE NOTES MODAL -->
    <div class="date-modal-overlay" id="dateModal" onclick="closeDateModal(event)">
        <div class="date-modal">
            <div class="date-modal-header">
                <span class="date-modal-title" id="dateModalTitle">February 21, 2026</span>
                <button class="date-modal-close" onclick="closeDateModal()">√ó</button>
            </div>
            <div class="date-modal-body">
                <div class="date-notes-list" id="dateNotesList">
                    <!-- Notes generated by JS -->
                </div>
                <textarea class="date-note-input" id="dateNoteInput" placeholder="Add a note for this date..."></textarea>
                <button class="btn" onclick="addDateNote()" style="width: 100%;">+ Add Note</button>
            </div>
        </div>
    </div>

    <main class="main-content">
        <!-- DASHBOARD TAB -->
        <div class="tab-content active" id="dashboard">
            <!-- HERO SECTION - ANIME VIBES -->
            <div class="hero-section">
                <div class="hero-bg"></div>
                <div class="hero-overlay"></div>
                <div class="hero-content">
                    <div style="flex: 1;">
                        <h1 class="hero-greeting" id="greeting">Good afternoon, Dibs</h1>
                        <p class="hero-subtitle" id="subtitle">Time to conquer today</p>
                        <div class="hero-status">
                            <div class="status-pill">
                                <span class="status-dot"></span>
                                <span>System Online</span>
                            </div>
                        </div>
                    </div>
                    <div class="hero-datetime">
                        <div class="hero-time" id="clock">--:--</div>
                        <div class="hero-date" id="date">Loading...</div>
                    </div>
                </div>
            </div>

            <!-- CALENDAR SECTION -->
            <div class="calendar-section">
                <div class="calendar-header-main">
                    <span class="calendar-title" id="calendarMonth">-- ----</span>
                    <div class="calendar-nav">
                        <button class="calendar-nav-btn" onclick="changeMonth(-1)">‚Üê</button>
                        <button class="calendar-nav-btn" onclick="resetToToday()">Today</button>
                        <button class="calendar-nav-btn" onclick="changeMonth(1)">‚Üí</button>
                    </div>
                </div>
                <div class="calendar-grid-main" id="calendarGrid">
                    <!-- Generated by JS -->
                </div>
            </div>

            <!-- CRYPTO WATCHLIST - COMPACT LIST -->
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="section-title-icon">üìà</span>
                        Watchlist
                    </h2>
                    <button class="btn btn-secondary" onclick="fetchCryptoPrices()">‚Üª Refresh</button>
                </div>
                <div class="watchlist-compact">
                    <div class="watchlist-row">
                        <span class="watchlist-icon">‚Çø</span>
                        <span class="watchlist-name">Bitcoin</span>
                        <span class="watchlist-symbol">BTC</span>
                        <span class="watchlist-price" id="btc-price">--</span>
                        <span class="watchlist-change" id="btc-change">--</span>
                    </div>
                    <div class="watchlist-row">
                        <span class="watchlist-icon">Œû</span>
                        <span class="watchlist-name">Ethereum</span>
                        <span class="watchlist-symbol">ETH</span>
                        <span class="watchlist-price" id="eth-price">--</span>
                        <span class="watchlist-change" id="eth-change">--</span>
                    </div>
                    <div class="watchlist-row">
                        <span class="watchlist-icon">‚óé</span>
                        <span class="watchlist-name">Solana</span>
                        <span class="watchlist-symbol">SOL</span>
                        <span class="watchlist-price" id="sol-price">--</span>
                        <span class="watchlist-change" id="sol-change">--</span>
                    </div>
                    <div class="watchlist-row">
                        <span class="watchlist-icon">‚Ç≥</span>
                        <span class="watchlist-name">Cardano</span>
                        <span class="watchlist-symbol">ADA</span>
                        <span class="watchlist-price" id="ada-price">--</span>
                        <span class="watchlist-change" id="ada-change">--</span>
                    </div>
                    <div class="watchlist-row">
                        <span class="watchlist-icon">‚óà</span>
                        <span class="watchlist-name">Avalanche</span>
                        <span class="watchlist-symbol">AVAX</span>
                        <span class="watchlist-price" id="avax-price">--</span>
                        <span class="watchlist-change" id="avax-change">--</span>
                    </div>
                </div>
                <div style="margin-top: var(--spacing-sm); padding: var(--spacing-sm); background: rgba(251, 191, 36, 0.05); border-radius: var(--radius-md); font-size: 0.8125rem; color: var(--text-muted);">
                    üìä Crypto now ‚Ä¢ Stocks coming soon
                </div>
            </div>

            <!-- ENHANCED TASK SYSTEM -->
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="section-title-icon">‚úì</span>
                        Tasks
                        <span style="margin-left: var(--spacing-sm); font-size: 0.75rem; color: var(--text-muted); font-weight: 400;" id="taskCounter"></span>
                    </h2>
                    <div style="display: flex; gap: var(--spacing-sm);">
                        <button class="btn btn-secondary" onclick="showCompletedHistory()">üìä History</button>
                        <button class="btn btn-secondary" onclick="clearCompletedTodos()">Clear Done</button>
                    </div>
                </div>
                <div class="tasks-container">
                    <!-- Task List -->
                    <div class="task-list" id="tasksList">
                        <!-- Tasks rendered by JS -->
                    </div>
                    
                    <!-- Show More Button (hidden if <= 5 tasks) -->
                    <button class="show-more-btn" id="showMoreBtn" onclick="toggleShowAllTasks()" style="display: none;">
                        <span>Show More</span>
                        <span class="count" id="moreCount">+0</span>
                    </button>
                    
                    <!-- Add Task Area -->
                    <div class="add-task-area">
                        <input type="text" class="add-task-input" id="newTaskInput" placeholder="Add a new task..." onkeypress="handleTaskInputKeypress(event)">
                        <div class="priority-buttons">
                            <button class="priority-btn critical" onclick="setNewTaskPriority('critical')" id="prio-critical" title="Critical">üî•</button>
                            <button class="priority-btn medium active" onclick="setNewTaskPriority('medium')" id="prio-medium" title="Medium">‚ö°</button>
                            <button class="priority-btn low" onclick="setNewTaskPriority('low')" id="prio-low" title="Not Urgent">‚òï</button>
                        </div>
                        <button class="add-task-submit" onclick="addNewTask()">+</button>
                    </div>
                </div>
            </div>

            <!-- NEWS BRIEFING -->
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="section-title-icon">üì∞</span>
                        <span id="briefingTitle">Daily Briefing</span>
                    </h2>
                    <button class="btn btn-secondary" onclick="loadBriefing()">‚Üª Refresh</button>
                </div>
                <div id="newsList">
                    <!-- News items generated by JS -->
                </div>
                <div class="quote-box" id="quoteBox">
                    <!-- Quote generated by JS -->
                </div>
            </div>
        </div>

        <!-- OTHER TABS -->
        <div class="tab-content" id="projects">
            <div class="section">
                <h2 class="section-title"><span class="section-title-icon">üìã</span>Project Board</h2>
                <p style="color: var(--text-muted);">Project board coming soon...</p>
            </div>
        </div>

        <div class="tab-content" id="revenue">
            <div class="section">
                <h2 class="section-title"><span class="section-title-icon">üí∞</span>Revenue Tracker</h2>
                <div class="cards-grid">
                    <div class="metric-card"><div class="metric-icon">üíµ</div><div class="metric-label">Monthly Budget</div><div class="metric-value">$100</div></div>
                    <div class="metric-card"><div class="metric-icon">‚òÅÔ∏è</div><div class="metric-label">Kimi 2.5</div><div class="metric-value">$60</div></div>
                    <div class="metric-card"><div class="metric-icon">üíª</div><div class="metric-label">Local Models</div><div class="metric-value">$2</div></div>
                    <div class="metric-card"><div class="metric-icon">üí∞</div><div class="metric-label">Buffer</div><div class="metric-value">$38</div></div>
                </div>
            </div>
        </div>

        <div class="tab-content" id="notes">
            <div class="section">
                <h2 class="section-title"><span class="section-title-icon">üìù</span>Notes</h2>
                <textarea style="width: 100%; height: 400px; background: rgba(251, 191, 36, 0.03); border: 1px solid rgba(251, 191, 36, 0.1); border-radius: var(--radius-md); padding: var(--spacing-md); color: var(--text-primary); font-family: inherit; font-size: 0.9375rem; resize: vertical;"
                    placeholder="Start writing your thoughts..."></textarea>
            </div>
        </div>

        <!-- AI COSTS TAB -->
        <div class="tab-content" id="ai-costs">
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        <span class="section-title-icon">ü§ñ</span>
                        AI Infrastructure Costs
                    </h2>
                    <button class="btn btn-secondary" onclick="refreshAICosts()">‚Üª Refresh</button>
                </div>
                
                <!-- Total Summary -->
                <div style="background: linear-gradient(135deg, rgba(251, 191, 36, 0.08) 0%, rgba(245, 158, 11, 0.05) 100%); border: 1px solid rgba(251, 191, 36, 0.15); border-radius: var(--radius-lg); padding: var(--spacing-lg); margin-bottom: var(--spacing-lg);">
                    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: var(--spacing-md);">
                        <div>
                            <div style="font-size: 0.875rem; color: var(--text-muted); margin-bottom: var(--spacing-xs);">This Session</div>
                            <div style="font-size: 2rem; font-weight: 700; color: var(--accent-gold);" id="totalSessionCost">$0.42</div>
                        </div>
                        <div>
                            <div style="font-size: 0.875rem; color: var(--text-muted); margin-bottom: var(--spacing-xs);">Total Tokens</div>
                            <div style="font-size: 1.5rem; font-weight: 600;" id="totalTokens">284K</div>
                        </div>
                        <div>
                            <div style="font-size: 0.875rem; color: var(--text-muted); margin-bottom: var(--spacing-xs);">Models Used</div>
                            <div style="font-size: 1.5rem; font-weight: 600;" id="modelsUsedCount">3</div>
                        </div>
                    </div>
                </div>

                <!-- LLM Breakdown -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--spacing-md);">
                    <!-- Kimi K2.5 -->
                    <div style="background: rgba(20, 20, 24, 0.6); border: 1px solid rgba(251, 191, 36, 0.1); border-radius: var(--radius-md); padding: var(--spacing-md);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-sm);">
                            <div style="font-weight: 600; color: var(--accent-gold);">üß† Kimi K2.5</div>
                            <div style="font-size: 0.875rem; color: var(--success);">Primary</div>
                        </div>
                        <div style="margin-bottom: var(--spacing-sm);">
                            <div style="font-size: 0.8125rem; color: var(--text-muted);">Tokens Used</div>
                            <div style="font-size: 1.25rem; font-weight: 600;">~280K</div>
                        </div>
                        <div style="margin-bottom: var(--spacing-sm);">
                            <div style="font-size: 0.8125rem; color: var(--text-muted);">Est. Cost</div>
                            <div style="font-size: 1.25rem; font-weight: 600;">~$0.40</div>
                        </div>
                        <div>
                            <div style="font-size: 0.8125rem; color: var(--text-muted);">Workload</div>
                            <div style="height: 8px; background: rgba(251, 191, 36, 0.1); border-radius: 4px; margin-top: var(--spacing-xs); overflow: hidden;">
                                <div style="width: 95%; height: 100%; background: linear-gradient(90deg, var(--accent-gold), var(--accent-amber)); border-radius: 4px;"></div>
                            </div>
                            <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 4px;">95% of total workload</div>
                        </div>
                    </div>

                    <!-- Groq Whisper -->
                    <div style="background: rgba(20, 20, 24, 0.6); border: 1px solid rgba(251, 191, 36, 0.1); border-radius: var(--radius-md); padding: var(--spacing-md);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-sm);">
                            <div style="font-weight: 600; color: var(--info);">üéôÔ∏è Groq Whisper</div>
                            <div style="font-size: 0.875rem; color: var(--info);">Transcription</div>
                        </div>
                        <div style="margin-bottom: var(--spacing-sm);">
                            <div style="font-size: 0.8125rem; color: var(--text-muted);">Audio Processed</div>
                            <div style="font-size: 1.25rem; font-weight: 600;">~5 min</div>
                        </div>
                        <div style="margin-bottom: var(--spacing-sm);">
                            <div style="font-size: 0.8125rem; color: var(--text-muted);">Est. Cost</div>
                            <div style="font-size: 1.25rem; font-weight: 600;">~$0.02</div>
                        </div>
                        <div>
                            <div style="font-size: 0.8125rem; color: var(--text-muted);">Workload</div>
                            <div style="height: 8px; background: rgba(251, 191, 36, 0.1); border-radius: 4px; margin-top: var(--spacing-xs); overflow: hidden;">
                                <div style="width: 5%; height: 100%; background: linear-gradient(90deg, var(--info), #60a5fa); border-radius: 4px;"></div>
                            </div>
                            <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 4px;">5% of total workload</div>
                        </div>
                    </div>

                    <!-- Local LLM -->
                    <div style="background: rgba(20, 20, 24, 0.6); border: 1px solid rgba(251, 191, 36, 0.1); border-radius: var(--radius-md); padding: var(--spacing-md);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-sm);">
                            <div style="font-weight: 600; color: var(--success);">üíª Local LLM</div>
                            <div style="font-size: 0.875rem; color: var(--text-muted);">On-device</div>
                        </div>
                        <div style="margin-bottom: var(--spacing-sm);">
                            <div style="font-size: 0.8125rem; color: var(--text-muted);">Status</div>
                            <div style="font-size: 1.25rem; font-weight: 600; color: var(--success);">‚ö° Active</div>
                        </div>
                        <div style="margin-bottom: var(--spacing-sm);">
                            <div style="font-size: 0.8125rem; color: var(--text-muted);">Cost</div>
                            <div style="font-size: 1.25rem; font-weight: 600; color: var(--success);">$0.00</div>
                        </div>
                        <div>
                            <div style="font-size: 0.8125rem; color: var(--text-muted);">Workload</div>
                            <div style="height: 8px; background: rgba(251, 191, 36, 0.1); border-radius: 4px; margin-top: var(--spacing-xs); overflow: hidden;">
                                <div style="width: 0%; height: 100%; background: linear-gradient(90deg, var(--success), #4ade80); border-radius: 4px;"></div>
                            </div>
                            <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 4px;">Reserved for offline use</div>
                        </div>
                    </div>
                </div>

                <!-- Cost History Chart Placeholder -->
                <div style="background: rgba(20, 20, 24, 0.6); border: 1px solid rgba(251, 191, 36, 0.1); border-radius: var(--radius-md); padding: var(--spacing-md); margin-top: var(--spacing-lg);">
                    <h3 style="font-size: 1rem; font-weight: 600; margin-bottom: var(--spacing-md);">üìà Cost History</h3>
                    <div style="height: 200px; display: flex; align-items: flex-end; justify-content: space-around; gap: var(--spacing-sm); padding: var(--spacing-md); background: rgba(10, 10, 12, 0.5); border-radius: var(--radius-md);">
                        <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: var(--spacing-xs);">
                            <div style="width: 100%; height: 30%; background: linear-gradient(180deg, var(--accent-gold), var(--accent-amber)); border-radius: 4px 4px 0 0;"></div>
                            <span style="font-size: 0.75rem; color: var(--text-muted);">Feb 17</span>
                        </div>
                        <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: var(--spacing-xs);">
                            <div style="width: 100%; height: 45%; background: linear-gradient(180deg, var(--accent-gold), var(--accent-amber)); border-radius: 4px 4px 0 0;"></div>
                            <span style="font-size: 0.75rem; color: var(--text-muted);">Feb 18</span>
                        </div>
                        <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: var(--spacing-xs);">
                            <div style="width: 100%; height: 25%; background: linear-gradient(180deg, var(--accent-gold), var(--accent-amber)); border-radius: 4px 4px 0 0;"></div>
                            <span style="font-size: 0.75rem; color: var(--text-muted);">Feb 19</span>
                        </div>
                        <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: var(--spacing-xs);">
                            <div style="width: 100%; height: 60%; background: linear-gradient(180deg, var(--accent-gold), var(--accent-amber)); border-radius: 4px 4px 0 0;"></div>
                            <span style="font-size: 0.75rem; color: var(--text-muted);">Feb 20</span>
                        </div>
                        <div style="flex: 1; display: flex; flex-direction: column; align-items: center; gap: var(--spacing-xs);">
                            <div style="width: 100%; height: 80%; background: linear-gradient(180deg, var(--accent-gold), var(--accent-amber)); border-radius: 4px 4px 0 0;"></div>
                            <span style="font-size: 0.75rem; color: var(--text-muted);">Today</span>
                        </div>
                    </div>
                    <div style="text-align: center; margin-top: var(--spacing-sm); font-size: 0.8125rem; color: var(--text-muted);">
                        Mission Control build sessions (approximate costs)
                    </div>
                </div>

                <!-- Connected Models List -->
                <div style="background: rgba(20, 20, 24, 0.6); border: 1px solid rgba(251, 191, 36, 0.1); border-radius: var(--radius-md); padding: var(--spacing-md); margin-top: var(--spacing-lg);">
                    <h3 style="font-size: 1rem; font-weight: 600; margin-bottom: var(--spacing-md);">üîó Connected AI Models</h3>
                    <div style="display: flex; flex-direction: column; gap: var(--spacing-sm);">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-sm); background: rgba(251, 191, 36, 0.05); border-radius: var(--radius-sm);">
                            <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
                                <span style="font-size: 1.25rem;">üß†</span>
                                <div>
                                    <div style="font-weight: 500;">Kimi K2.5</div>
                                    <div style="font-size: 0.75rem; color: var(--text-muted);">kimi-coding/k2p5 | 262K context</div>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div style="color: var(--success); font-weight: 500;">üü¢ Active</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">Primary</div>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-sm); background: rgba(59, 130, 246, 0.05); border-radius: var(--radius-sm);">
                            <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
                                <span style="font-size: 1.25rem;">üéôÔ∏è</span>
                                <div>
                                    <div style="font-weight: 500;">Groq Whisper</div>
                                    <div style="font-size: 0.75rem; color: var(--text-muted);">whisper-large-v3-turbo</div>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div style="color: var(--success); font-weight: 500;">üü¢ Active</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">Voice transcription</div>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-sm); background: rgba(34, 197, 94, 0.05); border-radius: var(--radius-sm);">
                            <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
                                <span style="font-size: 1.25rem;">üíª</span>
                                <div>
                                    <div style="font-weight: 500;">Local LLM</div>
                                    <div style="font-size: 0.75rem; color: var(--text-muted);">Ollama / LM Studio</div>
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div style="color: var(--warning); font-weight: 500;">üü° Standby</div>
                                <div style="font-size: 0.75rem; color: var(--text-muted);">On-device inference</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // ============================================
        // DATA & CONFIG
        // ============================================
        
        const briefingData = {
            morning: {
                greeting: "Good morning, Dibs! ‚òÄÔ∏è",
                subtitle: "The early bird catches the alpha",
                title: "Morning Briefing",
                quote: { text: "The best time to plant a tree was 20 years ago. The second best time is now.", author: "Chinese Proverb" },
                news: [
                    { id: 1, title: "Bitcoin breaks $42K resistance", source: "CoinDesk", category: "Trading", summary: "BTC shows strong momentum after weeks of consolidation. On-chain metrics suggest accumulation by institutional investors continues.", url: "https://www.coindesk.com" },
                    { id: 2, title: "OpenClaw releases agent framework", source: "TechCrunch", category: "AI", summary: "Major update enables 100 parallel agents for complex research tasks. Enterprise adoption accelerating.", url: "https://techcrunch.com" },
                    { id: 3, title: "Crypto market cap hits $1.6T", source: "Reuters", category: "Market", summary: "Overall market showing bullish sentiment as traditional finance eyes crypto ETF approvals.", url: "https://www.reuters.com" },
                    { id: 4, title: "Remote work trends 2026", source: "Forbes", category: "Business", summary: "Trading from anywhere becoming standard. Tax implications for digital nomads explored.", url: "https://www.forbes.com" },
                    { id: 5, title: "10 habits of successful traders", source: "Bloomberg", category: "Development", summary: "Discipline, journaling, and risk management top the list. Psychology beats strategy.", url: "https://www.bloomberg.com" }
                ]
            },
            afternoon: {
                greeting: "Good afternoon, Dibs! ‚òÄÔ∏è",
                subtitle: "Mid-day momentum check",
                title: "Afternoon Check-in",
                quote: { text: "Success is the sum of small efforts, repeated day in and day out.", author: "Robert Collier" },
                news: [
                    { id: 1, title: "ETH staking rewards increase", source: "CoinTelegraph", category: "Trading", summary: "Annual yield now at 4.2% as validator participation grows. Institutional staking services expanding.", url: "https://cointelegraph.com" },
                    { id: 2, title: "AI coding assistants comparison", source: "The Verge", category: "AI", summary: "Kimi leads in complex reasoning tasks while maintaining cost efficiency for developers.", url: "https://www.theverge.com" },
                    { id: 3, title: "Side hustle income tax guide", source: "WSJ", category: "Business", summary: "2026 tax updates for freelancers and independent traders. New deductions available.", url: "https://www.wsj.com" },
                    { id: 4, title: "Solana ecosystem growth", source: "Decrypt", category: "Market", summary: "DeFi TVL up 15% this month. NFT marketplace activity resurging.", url: "https://decrypt.co" },
                    { id: 5, title: "Time management for traders", source: "Inc", category: "Development", summary: "Focus blocks vs Pomodoro: Which works better for deep analysis work?", url: "https://www.inc.com" }
                ]
            },
            evening: {
                greeting: "Good evening, Dibs! üåô",
                subtitle: "Reflect, review, prepare",
                title: "Evening Review",
                quote: { text: "Rest when you're weary. Refresh and renew yourself, your body, your mind, your spirit.", author: "Dalai Lama" },
                news: [
                    { id: 1, title: "Daily crypto market wrap", source: "CoinDesk", category: "Trading", 
                      bullets: ["BTC +2.3%, ETH +1.8%, SOL +5.2%", "Volume above 30-day average", "Futures open interest climbing", "Institutional flows positive", "Next week: FOMC decision"], 
                      url: "https://www.coindesk.com" },
                    { id: 2, title: "OpenAI announces new model", source: "TechCrunch", category: "AI", 
                      bullets: ["Multimodal capabilities expanded", "Competition heating up in AI space", "Pricing remains competitive", "Enterprise demand surging", "API rate limits increased"], 
                      url: "https://techcrunch.com" },
                    { id: 3, title: "Freelance economy report 2026", source: "Forbes", category: "Business", 
                      bullets: ["Independent work up 23% YoY", "Trading as primary income growing", "Tax optimization strategies evolving", "Best jurisdictions ranked", "Digital nomad visas expanding"], 
                      url: "https://www.forbes.com" },
                    { id: 4, title: "Global markets close mixed", source: "Reuters", category: "Market", 
                      bullets: ["Asia markets up 1-2%", "Europe flat on energy concerns", "US futures point higher", "Crypto showing relative strength", "Dollar index slightly lower"], 
                      url: "https://www.reuters.com" },
                    { id: 5, title: "Sleep and performance link", source: "Harvard Health", category: "Development", 
                      bullets: ["Quality rest improves decisions by 40%", "Recovery is part of strategy", "Best sleep schedule for traders", "Naps and cognitive function", "Screen time before bed impact"], 
                      url: "https://www.health.harvard.edu" }
                ]
            }
        };

        const animeQuotes = [
            { text: "The only way to achieve the impossible is to believe it is possible.", author: "Charles Kingsley (Digimon Adventure)" },
            { text: "A person grows up when he's able to overcome hardships.", author: "Jiraiya (Naruto)" },
            { text: "The world isn't perfect. But it's there for us, trying the best it can.", author: "Roy Mustang (Fullmetal Alchemist)" },
            { text: "If you don't like your destiny, don't accept it.", author: "Naruto Uzumaki" },
            { text: "The future belongs to those who believe in the beauty of their dreams.", author: "Shoyo Hinata (Haikyuu!)" },
            { text: "Hard work is worthless for those that don't believe in themselves.", author: "Naruto Uzumaki" },
            { text: "When you give up, that's when the game ends.", author: "Mitsuyoshi Anzai (Slam Dunk)" }
        ];

        const DEFAULT_TASKS = [
            { text: 'Sort out SQL database setup', priority: 'critical', completed: false },
            { text: 'Sync Google Calendar with Mission Control', priority: 'medium', completed: false },
            { text: 'Set up Gmail email reading automation', priority: 'medium', completed: false },
            { text: 'Scrape Twitter/X for trading news', priority: 'low', completed: false },
            { text: 'Integrate Google API for news feed', priority: 'low', completed: false },
            { text: 'Talk to Claude to get memory bulletproof', priority: 'critical', completed: false },
            { text: 'Complete all interview questions about me', priority: 'high', completed: false },
            { text: 'Research Etsy competitor SavageLabs OpenClaw Dashboard ‚Äî analyze pricing/features for side hustle', priority: 'high', completed: false }
        ];

        // ============================================
        // STATE
        // ============================================
        
        let currentCalendarDate = new Date();
        let dateNotes = JSON.parse(localStorage.getItem('mc_dateNotes')) || {};
        let selectedDate = null;
        let showAllTasks = false;
        let newTaskPriority = 'medium';
        
        // Task Data
        let taskData = JSON.parse(localStorage.getItem('mc_tasksData_v6')) || {
            version: 'v6',
            tasks: [...DEFAULT_TASKS]
        };
        let completedTasksDB = JSON.parse(localStorage.getItem('mc_completedDB')) || [];

        // Ensure migration to v6
        if (taskData.version !== 'v6') {
            taskData = {
                version: 'v6',
                tasks: [...DEFAULT_TASKS]
            };
            localStorage.setItem('mc_tasksData_v6', JSON.stringify(taskData));
        }

        // ============================================
        // HELPER FUNCTIONS
        // ============================================
        
        function getTimeOfDay() {
            const hour = new Date().getHours();
            if (hour >= 5 && hour < 12) return 'morning';
            if (hour >= 12 && hour < 17) return 'afternoon';
            return 'evening';
        }

        // ============================================
        // CLOCK & DATE
        // ============================================
        
        function updateClock() {
            const now = new Date();
            document.getElementById('clock').textContent = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: false });
            document.getElementById('date').textContent = now.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' });
        }

        // ============================================
        // BRIEFING & NEWS
        // ============================================
        
        function loadBriefing() {
            const timeOfDay = getTimeOfDay();
            const data = briefingData[timeOfDay];
            const randomQuote = animeQuotes[Math.floor(Math.random() * animeQuotes.length)];
            
            document.getElementById('greeting').textContent = data.greeting;
            document.getElementById('subtitle').textContent = data.subtitle;
            document.getElementById('briefingTitle').textContent = data.title;
            
            // Render quote immediately
            const quoteBox = document.getElementById('quoteBox');
            if (quoteBox) {
                quoteBox.innerHTML = `${randomQuote.text}<div class="quote-author">‚Äî ${randomQuote.author}</div>`;
            }
            
            // Render news
            const newsList = document.getElementById('newsList');
            if (newsList) {
                newsList.innerHTML = data.news.map(item => {
                    const previewText = item.summary 
                        ? item.summary.substring(0, 50) + '...'
                        : (item.bullets && item.bullets[0] ? item.bullets[0].substring(0, 50) + '...' : 'Click to read more...');
                    return `
                    <div class="news-item" onclick="openNewsModal(${item.id})">
                        <div class="news-number">${item.id}</div>
                        <div class="news-content">
                            <div class="news-title">${item.title}</div>
                            <div class="news-summary">${previewText}</div>
                            <div class="news-meta">
                                <span class="news-source">${item.source}</span>
                                <span class="news-category">${item.category}</span>
                            </div>
                        </div>
                    </div>`;
                }).join('');
            }
            
            window.currentNews = data.news;
        }

        function openNewsModal(newsId) {
            const news = window.currentNews.find(n => n.id === newsId);
            if (!news) return;
            
            document.getElementById('modalTitle').textContent = news.title;
            document.getElementById('modalSource').textContent = news.source + ' ‚Ä¢ ' + news.category;
            
            let contentHtml = '';
            if (news.bullets && news.bullets.length > 0) {
                contentHtml = news.bullets.map(bullet => `‚Ä¢ ${bullet}`).join('<br>');
            } else if (news.summary) {
                contentHtml = news.summary;
            } else {
                contentHtml = 'Click Read Full Article for more details.';
            }
            document.getElementById('modalSummary').innerHTML = contentHtml;
            document.getElementById('modalSummary').style.lineHeight = '2';
            document.getElementById('modalLink').href = news.url;
            document.getElementById('newsModal').classList.add('active');
        }

        function closeModal(event) {
            if (!event || event.target.id === 'newsModal' || event.target.classList.contains('modal-close')) {
                document.getElementById('newsModal').classList.remove('active');
            }
        }

        // ============================================
        // CRYPTO PRICES
        // ============================================
        
        function setCryptoFallback() {
            const fallback = [
                { id: 'btc', price: '$96,420', change: '+2.3%', up: true },
                { id: 'eth', price: '$2,780', change: '+1.8%', up: true },
                { id: 'sol', price: '$198.50', change: '+5.2%', up: true },
                { id: 'ada', price: '$0.82', change: '-0.5%', up: false },
                { id: 'avax', price: '$35.20', change: '+3.1%', up: true }
            ];
            
            fallback.forEach(({ id, price, change, up }) => {
                const priceEl = document.getElementById(`${id}-price`);
                const changeEl = document.getElementById(`${id}-change`);
                if (priceEl) {
                    priceEl.textContent = price;
                    priceEl.classList.remove('loading');
                }
                if (changeEl) {
                    changeEl.textContent = change;
                    changeEl.className = 'watchlist-change ' + (up ? 'up' : 'down');
                }
            });
        }
        
        async function fetchCryptoPrices() {
            const ids = 'bitcoin,ethereum,solana,cardano,avalanche-2';
            const symbols = { 'bitcoin': 'btc', 'ethereum': 'eth', 'solana': 'sol', 'cardano': 'ada', 'avalanche-2': 'avax' };
            
            try {
                // Show loading state
                ['btc', 'eth', 'sol', 'ada', 'avax'].forEach(id => {
                    const priceEl = document.getElementById(`${id}-price`);
                    if (priceEl) priceEl.innerHTML = '<span class="loading"></span>';
                });
                
                const response = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=usd&include_24hr_change=true`);
                if (!response.ok) throw new Error('API limit reached');
                const data = await response.json();
                
                for (const [coin, info] of Object.entries(data)) {
                    const symbol = symbols[coin];
                    const price = info.usd.toLocaleString('en-US', { style: 'currency', currency: 'USD' });
                    const change = info.usd_24h_change.toFixed(2);
                    const isUp = info.usd_24h_change >= 0;
                    
                    const priceEl = document.getElementById(`${symbol}-price`);
                    const changeEl = document.getElementById(`${symbol}-change`);
                    
                    if (priceEl) {
                        priceEl.textContent = price;
                        priceEl.classList.remove('loading');
                    }
                    if (changeEl) {
                        changeEl.textContent = (isUp ? '+' : '') + change + '%';
                        changeEl.className = 'watchlist-change ' + (isUp ? 'up' : 'down');
                    }
                }
            } catch (error) {
                console.log('Using fallback crypto data');
                setCryptoFallback();
            }
        }

        // ============================================
        // ENHANCED TASK SYSTEM
        // ============================================
        
        function renderTasks() {
            const listContainer = document.getElementById('tasksList');
            const showMoreBtn = document.getElementById('showMoreBtn');
            const moreCount = document.getElementById('moreCount');
            const taskCounter = document.getElementById('taskCounter');
            
            if (!listContainer) return;
            
            // Sort: incomplete first, then by priority
            const priorityOrder = { critical: 0, medium: 1, low: 2 };
            const sortedTasks = [...taskData.tasks].sort((a, b) => {
                if (a.completed !== b.completed) return a.completed ? 1 : -1;
                return priorityOrder[a.priority || 'medium'] - priorityOrder[b.priority || 'medium'];
            });
            
            const totalTasks = sortedTasks.length;
            const incompleteCount = sortedTasks.filter(t => !t.completed).length;
            
            // Update counter
            if (taskCounter) {
                taskCounter.textContent = `${incompleteCount} pending`;
            }
            
            // Determine how many to show
            const tasksToShow = showAllTasks ? sortedTasks : sortedTasks.slice(0, 5);
            const hasMore = totalTasks > 5;
            
            // Show/hide Show More button
            if (showMoreBtn) {
                showMoreBtn.style.display = hasMore ? 'flex' : 'none';
                if (hasMore) {
                    const hiddenCount = totalTasks - 5;
                    showMoreBtn.innerHTML = showAllTasks 
                        ? '<span>Show Less</span><span class="count">‚Üë</span>'
                        : `<span>Show More</span><span class="count">+${hiddenCount}</span>`;
                }
            }
            
            // Render tasks
            if (tasksToShow.length === 0) {
                listContainer.innerHTML = '<div class="task-empty">No tasks yet. Add one below!</div>';
            } else {
                listContainer.innerHTML = tasksToShow.map((task, index) => {
                    const priorityClass = task.priority || 'medium';
                    const originalIndex = taskData.tasks.indexOf(task);
                    return `
                    <div class="task-item ${task.completed ? 'completed' : ''}">
                        <div class="task-priority ${priorityClass}" onclick="cycleTaskPriority(${originalIndex})" title="Click to change priority"></div>
                        <div class="task-checkbox ${task.completed ? 'checked' : ''}" onclick="toggleTask(${originalIndex})">
                            ${task.completed ? '‚úì' : ''}
                        </div>
                        <input type="text" class="task-text" value="${task.text}" 
                            placeholder="Enter task..."
                            onchange="updateTaskText(${originalIndex}, this.value)"
                            onblur="saveTasks()">
                        <button class="task-delete" onclick="deleteTask(${originalIndex})">√ó</button>
                    </div>`;
                }).join('');
            }
        }
        
        function toggleShowAllTasks() {
            showAllTasks = !showAllTasks;
            renderTasks();
        }
        
        function cycleTaskPriority(index) {
            const priorities = ['critical', 'medium', 'low'];
            const currentPriority = taskData.tasks[index].priority || 'medium';
            const currentIndex = priorities.indexOf(currentPriority);
            const nextIndex = (currentIndex + 1) % priorities.length;
            taskData.tasks[index].priority = priorities[nextIndex];
            saveTasks();
            renderTasks();
        }
        
        function setNewTaskPriority(priority) {
            newTaskPriority = priority;
            document.querySelectorAll('.priority-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`prio-${priority}`).classList.add('active');
        }
        
        function toggleTask(index) {
            taskData.tasks[index].completed = !taskData.tasks[index].completed;
            
            if (taskData.tasks[index].completed && taskData.tasks[index].text.trim()) {
                completedTasksDB.push({
                    text: taskData.tasks[index].text,
                    priority: taskData.tasks[index].priority,
                    completedAt: new Date().toISOString()
                });
                localStorage.setItem('mc_completedDB', JSON.stringify(completedTasksDB));
            }
            
            saveTasks();
            renderTasks();
        }
        
        function updateTaskText(index, text) {
            taskData.tasks[index].text = text;
            saveTasks();
        }
        
        function deleteTask(index) {
            taskData.tasks.splice(index, 1);
            saveTasks();
            renderTasks();
        }
        
        function addNewTask() {
            const input = document.getElementById('newTaskInput');
            const text = input.value.trim();
            if (!text) return;
            
            taskData.tasks.push({
                id: Date.now(),
                text: text,
                priority: newTaskPriority,
                completed: false
            });
            
            input.value = '';
            saveTasks();
            renderTasks();
        }
        
        function handleTaskInputKeypress(event) {
            if (event.key === 'Enter') {
                addNewTask();
            }
        }
        
        function saveTasks() {
            // Update texts from DOM inputs
            const inputs = document.querySelectorAll('#tasksList .task-text');
            inputs.forEach((input, index) => {
                if (taskData.tasks[index]) {
                    taskData.tasks[index].text = input.value;
                }
            });
            localStorage.setItem('mc_tasksData_v6', JSON.stringify(taskData));
        }
        
        function clearCompletedTodos() {
            taskData.tasks = taskData.tasks.filter(t => !t.completed);
            saveTasks();
            renderTasks();
        }
        
        function showCompletedHistory() {
            const now = new Date();
            const thisMonth = completedTasksDB.filter(t => {
                const date = new Date(t.completedAt);
                return date.getMonth() === now.getMonth() && date.getFullYear() === now.getFullYear();
            });
            
            const totalCompleted = completedTasksDB.length;
            const thisMonthCount = thisMonth.length;
            const pendingCount = taskData.tasks.filter(t => !t.completed).length;
            
            const message = `üìä TASK ANALYTICS

Active Tasks: ${pendingCount}
This Month Completed: ${thisMonthCount}
Total History: ${totalCompleted}

Recent Completed:
${completedTasksDB.slice(-5).map(t => `${t.priority === 'critical' ? 'üî•' : t.priority === 'low' ? '‚òï' : '‚ö°'} ${t.text.substring(0, 35)}`).join('\n')}`;
            
            alert(message);
        }

        // ============================================
        // CALENDAR
        // ============================================
        
        function changeMonth(delta) {
            currentCalendarDate.setMonth(currentCalendarDate.getMonth() + delta);
            generateCalendar();
        }

        function resetToToday() {
            currentCalendarDate = new Date();
            generateCalendar();
        }

        function generateCalendar() {
            const year = currentCalendarDate.getFullYear();
            const month = currentCalendarDate.getMonth();
            const today = new Date();
            const isCurrentMonth = today.getFullYear() === year && today.getMonth() === month;
            
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            const monthEl = document.getElementById('calendarMonth');
            if (monthEl) monthEl.textContent = monthNames[month] + ' ' + year;
            
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            
            let html = dayNames.map(d => `<div class="calendar-day-header">${d}</div>`).join('');
            
            for (let i = 0; i < firstDay; i++) {
                html += '<div></div>';
            }
            
            for (let day = 1; day <= daysInMonth; day++) {
                const isToday = isCurrentMonth && day === today.getDate();
                const dateKey = `${year}-${month}-${day}`;
                const dayNotes = dateNotes[dateKey] || [];
                const hasNote = dayNotes.length > 0;
                const noteText = hasNote ? dayNotes[0].text.substring(0, 8) + (dayNotes[0].text.length > 8 ? '...' : '') : '';
                
                const classes = ['calendar-day-cell'];
                if (isToday) classes.push('today');
                if (hasNote) classes.push('has-note');
                
                html += `
                    <div class="${classes.join(' ')}" onclick="openDateModal(${day})" title="${hasNote ? dayNotes[0].text : 'Click to add note'}">
                        <span class="calendar-day-number">${day}</span>
                        ${hasNote ? `<span class="calendar-note-indicator">üìù ${noteText}</span>` : ''}
                    </div>
                `;
            }
            
            const gridEl = document.getElementById('calendarGrid');
            if (gridEl) gridEl.innerHTML = html;
        }

        function openDateModal(day) {
            selectedDate = day;
            const year = currentCalendarDate.getFullYear();
            const month = currentCalendarDate.getMonth();
            const dateKey = `${year}-${month}-${day}`;
            const notes = dateNotes[dateKey] || [];
            
            const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            document.getElementById('dateModalTitle').textContent = `${monthNames[month]} ${day}, ${year}`;
            document.getElementById('dateNoteInput').value = '';
            
            const notesList = document.getElementById('dateNotesList');
            if (notes.length === 0) {
                notesList.innerHTML = '<div style="color: var(--text-muted); text-align: center; padding: var(--spacing-md);">No notes for this date</div>';
            } else {
                notesList.innerHTML = notes.map((note, idx) => `
                    <div class="date-note-item">
                        <span class="date-note-text">${note.text}</span>
                        <button class="date-note-delete" onclick="deleteDateNote(${idx})">√ó</button>
                    </div>
                `).join('');
            }
            
            document.getElementById('dateModal').classList.add('active');
        }

        function closeDateModal(event) {
            if (!event || event.target.id === 'dateModal' || event.target.classList.contains('date-modal-close')) {
                document.getElementById('dateModal').classList.remove('active');
                selectedDate = null;
            }
        }

        function addDateNote() {
            if (!selectedDate) return;
            
            const input = document.getElementById('dateNoteInput');
            const text = input.value.trim();
            if (!text) return;
            
            const year = currentCalendarDate.getFullYear();
            const month = currentCalendarDate.getMonth();
            const dateKey = `${year}-${month}-${selectedDate}`;
            
            if (!dateNotes[dateKey]) {
                dateNotes[dateKey] = [];
            }
            
            dateNotes[dateKey].push({
                id: Date.now(),
                text: text,
                created: new Date().toISOString()
            });
            
            localStorage.setItem('mc_dateNotes', JSON.stringify(dateNotes));
            input.value = '';
            openDateModal(selectedDate);
            generateCalendar();
        }

        function deleteDateNote(idx) {
            if (!selectedDate) return;
            
            const year = currentCalendarDate.getFullYear();
            const month = currentCalendarDate.getMonth();
            const dateKey = `${year}-${month}-${selectedDate}`;
            
            if (dateNotes[dateKey]) {
                dateNotes[dateKey].splice(idx, 1);
                if (dateNotes[dateKey].length === 0) {
                    delete dateNotes[dateKey];
                }
                localStorage.setItem('mc_dateNotes', JSON.stringify(dateNotes));
                openDateModal(selectedDate);
                generateCalendar();
            }
        }

        // ============================================
        // TAB SWITCHING
        // ============================================
        
        function switchTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            
            const tabContent = document.getElementById(tabId);
            if (tabContent) tabContent.classList.add('active');
            
            // Update nav button
            const clickedBtn = event.target;
            clickedBtn.classList.add('active');
        }

        // ============================================
        // AI COSTS
        // ============================================
        
        function refreshAICosts() {
            const btn = event.target;
            btn.textContent = '‚ü≥ Loading...';
            setTimeout(() => {
                btn.textContent = '‚Üª Refresh';
                alert('üìä AI Costs Updated!\n\nCurrent Session:\n‚Ä¢ Kimi K2.5: ~280K tokens ($0.40)\n‚Ä¢ Groq Whisper: ~5 min audio ($0.02)\n‚Ä¢ Local LLM: $0.00\n\nTotal: ~$0.42');
            }, 500);
        }

        // ============================================
        // INITIALIZATION - AUTO-LOAD EVERYTHING
        // ============================================
        
        function initMissionControl() {
            console.log('[Mission Control] Initializing v6.4.0...');
            
            try {
                // Clock (immediate)
                updateClock();
                setInterval(updateClock, 1000);
                
                // Calendar (immediate)
                generateCalendar();
                
                // Tasks (immediate)
                renderTasks();
                
                // Briefing & Quote (immediate)
                loadBriefing();
                
                // Crypto (immediate fallback, then API)
                setCryptoFallback(); // Show data immediately
                fetchCryptoPrices(); // Try to fetch fresh data
                
                // Periodic updates
                setInterval(fetchCryptoPrices, 300000);
                
                console.log('[Mission Control] Initialization complete ‚úì');
            } catch (error) {
                console.error('[Mission Control] Initialization error:', error);
            }
        }

        // Multiple init strategies for reliability
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initMissionControl);
        } else {
            initMissionControl();
        }
        
        window.addEventListener('load', function() {
            if (!window.mcInitialized) {
                console.log('[Mission Control] Backup init triggered');
                initMissionControl();
                window.mcInitialized = true;
            }
        });
    </script>
</body>
</html>
